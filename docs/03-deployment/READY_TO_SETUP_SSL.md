# üéâ DNS –æ–±–Ω–æ–≤–∏–ª—Å—è! –ì–æ—Ç–æ–≤ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ SSL

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS (–∑–∞–≤–µ—Ä—à–µ–Ω–∞)

DNS –∑–∞–ø–∏—Å–∏ —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏–ª–∏—Å—å:
```
alash-zan.kz       ‚Üí 194.32.142.237 (IPv4) ‚úÖ
alash-zan.kz       ‚Üí 2a00:5da0:1000:1::285a (IPv6) ‚úÖ
www.alash-zan.kz   ‚Üí 194.32.142.237 (IPv4) ‚úÖ
```

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ**: 09.01.2025

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (1 –∫–æ–º–∞–Ω–¥–∞)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp -i docs/03-deployment/Claude-Alash-Zan-key.pem docs/03-deployment/setup-ssl.sh ubuntu@194.32.142.237:~/

# 2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh -i docs/03-deployment/Claude-Alash-Zan-key.pem ubuntu@194.32.142.237

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
chmod +x ~/setup-ssl.sh && ./setup-ssl.sh
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç DNS –∑–∞–ø–∏—Å–∏
2. –°–æ–∑–¥–∞—Å—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
3. –û–±–Ω–æ–≤–∏—Ç Nginx —Å –¥–æ–º–µ–Ω–æ–º alash-zan.kz
4. –ü–æ–ª—É—á–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ HTTP ‚Üí HTTPS
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–ø–æ—à–∞–≥–æ–≤–æ)

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh -i docs/03-deployment/Claude-Alash-Zan-key.pem ubuntu@194.32.142.237

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS –µ—â–µ —Ä–∞–∑ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
dig alash-zan.kz +short
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: 194.32.142.237

# 3. –û–±–Ω–æ–≤–∏—Ç—å Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nano /etc/nginx/sites-available/alash-zan
# –ò–∑–º–µ–Ω–∏—Ç—å:  server_name 194.32.142.237;
# –ù–∞:        server_name alash-zan.kz www.alash-zan.kz;

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# 5. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Nginx
sudo systemctl reload nginx

# 6. –ü–æ–ª—É—á–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --nginx -d alash-zan.kz -d www.alash-zan.kz
```

---

## üìã –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
```bash
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
https://alash-zan.kz
https://www.alash-zan.kz

# HTTP –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ HTTPS
http://alash-zan.kz ‚Üí https://alash-zan.kz
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh -i docs/03-deployment/Claude-Alash-Zan-key.pem ubuntu@194.32.142.237 "sudo certbot certificates"

# –° –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
curl -I https://alash-zan.kz
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL —Ä–µ–π—Ç–∏–Ω–≥
–û—Ç–∫—Ä—ã—Ç—å: https://www.ssllabs.com/ssltest/analyze.html?d=alash-zan.kz

**–û–∂–∏–¥–∞–µ–º–∞—è –æ—Ü–µ–Ω–∫–∞**: A –∏–ª–∏ A+

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
ssh -i docs/03-deployment/Claude-Alash-Zan-key.pem ubuntu@194.32.142.237 "sudo certbot renew --dry-run"
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–ø–ª–æ—è —Å –Ω–æ–≤—ã–º –¥–æ–º–µ–Ω–æ–º

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ:

### 1. –û–±–Ω–æ–≤–∏—Ç—å site.url –≤ Astro –∫–æ–Ω—Ñ–∏–≥–µ
```typescript
// astro.config.mjs
export default defineConfig({
  site: 'https://alash-zan.kz', // –û–±–Ω–æ–≤–∏—Ç—å —Å http://194.32.142.237/
  // ...
});
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å robots.txt
```
# public/robots.txt
Sitemap: https://alash-zan.kz/sitemap-index.xml
```

### 3. –û–±–Ω–æ–≤–∏—Ç—å sitemap
```xml
<!-- public/sitemap-index.xml -->
<!-- –ò–∑–º–µ–Ω–∏—Ç—å –≤—Å–µ URL —Å http://194.32.142.237 –Ω–∞ https://alash-zan.kz -->
```

### 4. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
git add .
git commit -m "chore: update site URL to production domain with HTTPS"
git push origin main

# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–µ–ª–∏–∑
git tag v1.0.1
git push origin v1.0.1
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞ 20, 10 –∏ 1 –¥–µ–Ω—å –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è.

**Email —É–∫–∞–∑–∞–Ω**: admin@alash-zan.kz (–ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

1. **UptimeRobot** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
   - URL: https://uptimerobot.com/
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞
   - Email/SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

2. **SSL Labs** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
   - URL: https://www.ssllabs.com/
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –†–µ–π—Ç–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

3. **Certificate Monitor** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
   - URL: https://certificatemonitor.org/
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

---

## ‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç systemd timer:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status certbot.timer

# –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è:
# - –ü—Ä–æ–≤–µ—Ä–∫–∞: 2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å
# - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ó–∞ 30 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
# - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 90 –¥–Ω–µ–π
```

**–†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)**:
```bash
sudo certbot renew
```

---

## üéØ –ß–µ–∫–ª–∏—Å—Ç

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL, –æ—Ç–º–µ—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã:

- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–ª—É—á–µ–Ω –æ—Ç Let's Encrypt
- [ ] –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ https://alash-zan.kz
- [ ] HTTP –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ HTTPS
- [ ] WWW —Ä–∞–±–æ—Ç–∞–µ—Ç: https://www.alash-zan.kz
- [ ] SSL —Ä–µ–π—Ç–∏–Ω–≥ A/A+ –Ω–∞ ssllabs.com
- [ ] –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (dry-run —É—Å–ø–µ—à–µ–Ω)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω site.url –≤ astro.config.mjs
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω robots.txt
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω sitemap
- [ ] –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (UptimeRobot)
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (INFRASTRUCTURE.md)

---

## üìù –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL, –æ–±–Ω–æ–≤–∏—Ç—å –≤ `INFRASTRUCTURE.md`:

```markdown
**–°—Ç–∞—Ç—É—Å DNS**:
- ‚úÖ DNS —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏–ª—Å—è
- ‚úÖ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å –¥–æ–º–µ–Ω–æ–º
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (Let's Encrypt)
- ‚úÖ –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω: https://alash-zan.kz
- ‚úÖ HTTP ‚Üí HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
```

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: [DNS_AND_SSL_SETUP.md](DNS_AND_SSL_SETUP.md)
- **–°–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: [setup-ssl.sh](setup-ssl.sh)
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: [INFRASTRUCTURE.md](INFRASTRUCTURE.md)
- **Certbot –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://certbot.eff.org/
- **Let's Encrypt**: https://letsencrypt.org/

---

**–°–æ–∑–¥–∞–Ω–æ**: 09 —è–Ω–≤–∞—Ä—è 2025
**–°—Ç–∞—Ç—É—Å**: ‚úÖ DNS –≥–æ—Ç–æ–≤, –æ–∂–∏–¥–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL
