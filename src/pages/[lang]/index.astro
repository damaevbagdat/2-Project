---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Hero from '../../components/Hero.astro';
import PricingSection from '../../components/PricingSection.astro';
import ProcessSection from '../../components/ProcessSection.astro';
import AdvantagesSection from '../../components/AdvantagesSection.astro';
import ContactSection from '../../components/ContactSection.astro';

const locale = Astro.params.lang;

export async function getStaticPaths() {
  const locales = ['ru', 'kz', 'en'];
  return locales.map(l => ({ params: { lang: l } }));
}

// Define localized titles and descriptions
const localizedContent = {
  ru: {
    title: 'Gods of special equipment - УСЛУГИ ПО РЕМОНТУ СПЕЦ.ТЕХНИКИ',
    description: 'Профессиональный ремонт спецтехники и дизельных двигателей. Диагностика, замена деталей, капитальный ремонт ДВС. Гибкие цены, запчасти в наличии.'
  },
  en: {
    title: 'Gods of special equipment - HEAVY EQUIPMENT REPAIR SERVICES',
    description: 'Professional heavy equipment and diesel engine repair. Diagnostics, parts replacement, engine overhaul. Flexible prices, parts in stock.'
  },
  kz: {
    title: 'Gods of special equipment - АРНАЙЫ ТЕХНИКАНЫ ЖӨНДЕУ ҚЫЗМЕТТЕРІ',
    description: 'Арнайы техника мен дизельді қозғалтқыштарды кәсіби жөндеу. Диагностика, бөлшектерді ауыстыру, қозғалтқышты күрделі жөндеу. Икемді бағалар, қосалқы бөлшектер қорда.'
  }
};

const content = localizedContent[locale] || localizedContent.ru;
---

<BaseLayout lang={locale} title={content.title} description={content.description}>
  <Hero lang={locale} />
  <PricingSection lang={locale} />
  <ProcessSection lang={locale} />
  <AdvantagesSection lang={locale} />
  <ContactSection lang={locale} />
</BaseLayout>

<script>
  import { initAccordion } from '../../scripts/accordion';
  import { initScrollEffects } from '../../scripts/scroll-effects';
  import { initSmoothScroll } from '../../scripts/smooth-scroll';

  document.addEventListener('DOMContentLoaded', () => {
    initAccordion();
    initScrollEffects();
    initSmoothScroll();
  });
</script>
